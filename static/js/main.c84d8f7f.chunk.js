(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{20:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(22),r=n.n(i),c=n(8),o=(n(20),n(24)),l=n(4),u=n(2),p=n.p+"static/media/logo.c7581985.svg",d=n(0);var h=function(e){var t=e.loggedIn,n=Object(u.g)();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("img",{className:"header__logo",src:p,alt:"Around the US Logo"}),Object(d.jsxs)("div",{className:"header__info",children:[t?Object(d.jsx)("div",{className:"header__text header__text_email",children:"ahnaf@mail.com"}):"",Object(d.jsx)(c.b,{to:"/login",className:"header__text header__text_log-in",children:"Log in"}),Object(d.jsx)(c.b,{to:"/register",className:"header__text header__text_sign-up",children:"Sign up"}),t?Object(d.jsx)("div",{onClick:function(){localStorage.removeItem("jwt"),n.push("/login")},className:"header__text header__text_log-out",children:"Log out"}):""]})]})})},j=Object(a.createContext)(null);var b=function(e){var t=e.onCardClick,n=e.onCardLike,s=e.onCardDelete,i=e.card,r=Object(a.useContext)(j),c=i.owner._id===r._id,o=i.likes.some((function(e){return e._id===r._id})),l="".concat(c?"elements__delete-icon":"elements__delete-icon_hidden"),u="".concat(o?"elements__heart-icon_liked elements__heart-icon":"elements__heart-icon");return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("li",{className:"elements__card",children:[Object(d.jsx)("img",{onClick:function(){t(i)},src:i.link,alt:i.name,className:"elements__image"}),Object(d.jsxs)("div",{className:"elements__info",children:[Object(d.jsx)("h2",{className:"elements__title",children:i.name}),Object(d.jsxs)("div",{className:"elements__likes",children:[Object(d.jsx)("button",{type:"button",className:u,onClick:function(){return n(i)},"aria-label":"Heart Button"}),Object(d.jsx)("span",{className:"elements__like-counter",children:i.likes.length})]})]}),Object(d.jsx)("button",{className:l,onClick:function(){return s(i)},type:"button","aria-label":"Delete Button"})]})})};var m=function(e){var t=e.onEditAvatarClick,n=e.onEditProfileClick,s=e.onAddPlaceClick,i=e.onCardClick,r=e.onCardLike,c=e.onCardDelete,o=e.cards,l=Object(a.useContext)(j);return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("main",{className:"main",children:[Object(d.jsxs)("section",{className:"profile",children:[Object(d.jsx)("div",{className:"profile__picture",onClick:t,children:Object(d.jsx)("img",{src:l.avatar,alt:"Jacques Cousteau",className:"profile__image"})}),Object(d.jsxs)("div",{className:"profile__info",children:[Object(d.jsx)("h1",{className:"profile__title",children:l.name}),Object(d.jsx)("button",{type:"button",className:"profile__edit-button","aria-label":"Edit Button",onClick:n}),Object(d.jsx)("p",{className:"profile__tag",children:l.about})]}),Object(d.jsx)("button",{type:"button",className:"profile__plus-button","aria-label":"Plus Button",onClick:s})]}),Object(d.jsx)("section",{children:Object(d.jsx)("ul",{className:"elements",children:Object(d.jsx)(d.Fragment,{children:o.map((function(e){return Object(d.jsx)(b,{card:e,onCardDelete:c,onCardLike:r,onCardClick:i},e._id)}))})})})]})})};var _=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("footer",{className:"footer",children:Object(d.jsx)("p",{className:"footer__text",children:"\xa9 2020 Around The U.S."})})})},O=n(13),f=n(14),x=new(function(){function e(t){Object(O.a)(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}return Object(f.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error")}},{key:"renderUserInfo",value:function(){var e=this;return fetch(this.baseUrl+"/users/me",{headers:this.headers,method:"GET"}).then((function(t){return e._checkResponse(t)}))}},{key:"renderCards",value:function(){var e=this;return fetch(this.baseUrl+"/cards",{headers:this.headers,method:"GET"}).then((function(t){return e._checkResponse(t)}))}},{key:"addCard",value:function(e){var t=this,n=e.name,a=e.link;return fetch(this.baseUrl+"/cards",{headers:this.headers,method:"POST",body:JSON.stringify({name:n,link:a})}).then((function(e){return t._checkResponse(e)}))}},{key:"setUserInfo",value:function(e){var t=this,n=e.name,a=e.about;return fetch(this.baseUrl+"/users/me/",{headers:this.headers,method:"PATCH",body:JSON.stringify({name:n,about:a})}).then((function(e){return t._checkResponse(e)}))}},{key:"setUserAvatar",value:function(e){var t=this;return fetch(this.baseUrl+"/users/me/avatar",{headers:this.headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResponse(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch(this.baseUrl+"/cards/likes/"+e,{headers:this.headers,method:"PUT"}).then((function(e){return t._checkResponse(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch(this.baseUrl+"/cards/likes/"+e,{headers:this.headers,method:"DELETE"}).then((function(e){return t._checkResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch(this.baseUrl+"/cards/"+e,{headers:this.headers,method:"DELETE"}).then((function(e){return t._checkResponse(e)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-13",headers:{authorization:"4bb4f649-ce49-4e5f-81c2-ac119aac9e7d","Content-Type":"application/json"}});var g=function(e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{onClick:e.onClose,className:"popup popup_".concat(e.name," ").concat(e.isOpen?"popup_open":""),children:Object(d.jsxs)("div",{className:"popup__container",children:[Object(d.jsx)("h3",{className:"popup__title popup__title_".concat(e.name),children:e.title}),Object(d.jsxs)("form",{onSubmit:e.onSubmit,action:"POST",className:"popup__form popup__form_".concat(e.name),name:"".concat(e.name),children:[e.children,Object(d.jsx)("button",{type:"submit",className:"popup__btn","aria-label":"Save Button",children:e.buttonText})]}),Object(d.jsx)("button",{type:"button",className:"popup__close-btn","aria-label":"Close Button",onClick:e.onClose})]})})})};var v=function(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateUser,i=Object(a.useState)(""),r=Object(l.a)(i,2),c=r[0],o=r[1],u=Object(a.useState)(""),p=Object(l.a)(u,2),h=p[0],b=p[1],m=Object(a.useContext)(j);return Object(a.useEffect)((function(){o(m.name),b(m.about)}),[m,t]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(g,{onSubmit:function(e){e.preventDefault(),s({name:c,about:h})},name:"profile",title:"Edit Profile",buttonText:"Save",isOpen:t,onClose:n,children:[Object(d.jsx)("input",{id:"profile-title-input",name:"name",type:"text",className:"popup__input popup__input_value_name",placeholder:"Name",value:c||"",minLength:"2",maxLength:"40",onChange:function(e){o(e.target.value)},required:!0}),Object(d.jsx)("span",{id:"profile-title-input-error",className:"popup__input-error"}),Object(d.jsx)("input",{id:"profile-about-input",name:"about",type:"text",className:"popup__input popup__input_value_about",placeholder:"About Me",value:h||"",minLength:"2",maxLength:"200",onChange:function(e){b(e.target.value)},required:!0}),Object(d.jsx)("span",{id:"profile-about-input-error",className:"popup__input-error"})]})})};var k=function(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateAvatar,i=Object(a.useRef)();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(g,{name:"avatar",title:"Change Profile Picture",buttonText:"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),s(i.current.value)},children:[Object(d.jsx)("input",{ref:i,id:"image-link-input",name:"avatar",type:"url",className:"popup__input popup__input_profile_link",placeholder:"url",defaultValue:"",minLength:"2",maxLength:"250",required:!0}),Object(d.jsx)("span",{id:"image-link-input-error",className:"popup__input-error popup__input-error_profile-image"}),Object(d.jsx)("span",{id:"profile-about-input-error",className:"popup__input-error"})]})})},N=n(19);var C=function(e){var t=e.isOpen,n=e.onClose,a=e.onAddCard,s=Object(N.useState)(""),i=Object(l.a)(s,2),r=i[0],c=i[1],o=Object(N.useState)(""),u=Object(l.a)(o,2),p=u[0],h=u[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(g,{name:"card",title:"New Place",buttonText:"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:r,link:p}),c(""),h("")},children:[Object(d.jsx)("input",{id:"card-title-input",onChange:function(e){c(e.target.value)},name:"name",type:"text",className:"popup__input popup__input_place_name",placeholder:"Name",defaultValue:r,minLength:"2",maxLength:"250",required:!0}),Object(d.jsx)("span",{id:"card-title-input-error",className:"popup__input-error"}),Object(d.jsx)("input",{id:"card-link-input",onChange:function(e){h(e.target.value)},name:"link",type:"url",className:"popup__input popup__input_place_image-url",placeholder:"Image URL",defaultValue:p,minLength:"2",maxLength:"250",required:!0}),Object(d.jsx)("span",{id:"card-link-input-error",className:"popup__input-error"})]})})};var y=function(e){var t=e.card,n=e.onClose,a=e.isOpen;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{onClick:n,className:"popup popup_image-expanded ".concat(a?"popup_open":""),children:Object(d.jsx)("div",{className:"image-expanded",children:Object(d.jsxs)("div",{className:"image-expanded__container",children:[Object(d.jsx)("img",{src:t?t.link:"#",alt:t?t.name:"",className:"image-expanded__image"}),Object(d.jsx)("h2",{className:"image-expanded__title",children:t?t.name:""}),Object(d.jsx)("button",{onClick:n,className:"popup__close-btn",type:"button"})]})})})})},S=n.p+"static/media/success.1b6082f8.svg";n.p;var L=function(e){var t=e.onClose;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"popup popup__info-tool-tip",children:Object(d.jsxs)("div",{className:"popup__container popup__info-tool-tip_container",children:[Object(d.jsx)("img",{className:"popup__info-tool-tip_icon",src:S,alt:"Success"}),Object(d.jsx)("p",{className:"popup__info-tool-tip_message",children:"Success! You have now been registered."}),Object(d.jsx)("button",{onClick:t,className:"popup__close-btn",type:"button"})]})})})};var U=function(e){var t=e.onRegisterUser,n=Object(a.useState)(""),s=Object(l.a)(n,2),i=s[0],r=s[1],o=Object(a.useState)(""),u=Object(l.a)(o,2),p=u[0],h=u[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"authorization",children:[Object(d.jsx)("h1",{className:"authorization__title",children:"Register"}),Object(d.jsxs)("form",{action:"POST",onSubmit:function(e){e.preventDefault(),t({email:i,password:p})},name:"register",className:"authorization__form",children:[Object(d.jsx)("input",{placeholder:"Email",className:"authorization__input",type:"email",name:"email",minLength:"2",maxLength:"200",onChange:function(e){r(e.target.value)},required:!0}),Object(d.jsx)("input",{placeholder:"Password",className:"authorization__input",type:"password",name:"password",minLength:"2",maxLength:"200",onChange:function(e){h(e.target.value)},required:!0}),Object(d.jsx)("button",{type:"submit",className:"authorization__button authorization__button_sign-up",children:"Sign UP"})]}),Object(d.jsxs)("p",{className:"authorization__info",children:["Already a member?"," ",Object(d.jsx)(c.b,{to:"/login",className:"authorization__link",children:"Log in here!"})]})]})})};var P=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"authorization",children:[Object(d.jsx)("h1",{className:"authorization__title",children:"Log in"}),Object(d.jsxs)("form",{action:"POST",className:"authorization__form",children:[Object(d.jsx)("input",{placeholder:"Email",className:"authorization__input",type:"email",name:"email",minLength:"2",maxLength:"200",required:!0}),Object(d.jsx)("input",{placeholder:"Password",className:"authorization__input",type:"password",name:"password",minLength:"2",maxLength:"200",required:!0}),Object(d.jsx)("button",{type:"submit",className:"authorization__button authorization__button_log-in",children:"Log in"})]}),Object(d.jsxs)("p",{className:"authorization__info",children:["Not a member yet? ",Object(d.jsx)(c.b,{to:"/register",className:"authorization__link",children:"Sign up here!"})]})]})})},w=n(25),E=n(26),T=["component"],z=function(e){var t=e.component,n=Object(E.a)(e,T);return Object(d.jsx)(u.b,{children:function(){return n.loggedIn?Object(d.jsx)(t,Object(w.a)({},n)):Object(d.jsx)(u.a,{to:"./login"})}})},A=new(function(){function e(){Object(O.a)(this,e),this.baseUrl="https://register.nomoreparties.co/",this.headers={authorization:"4bb4f649-ce49-4e5f-81c2-ac119aac9e7d",Accept:"application/json","Content-Type":"application/json"}}return Object(f.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error")}},{key:"registerUser",value:function(e){var t=this,n=e.email,a=e.password;return fetch(this.baseUrl+"/signup",{headers:this.headers,method:"POST",body:JSON.stringify({email:n,password:a})}).then((function(e){return t._checkResponse(e)}))}},{key:"authorizeUser",value:function(e){var t=this,n=e.email,a=e.password;return fetch(this.baseUrl+"/signin",{headers:this.headers,method:"POST",body:JSON.stringify({email:n,password:a})}).then((function(e){if(e.user)return localStorage.setItem("jwt",e.jwt),e})).then((function(e){return t._checkResponse(e)}))}},{key:"checkUserToken",value:function(e){var t=this,n=e.token;return fetch(this.baseUrl+"/users/me",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},method:"GET"}).then((function(e){return t._checkResponse(e)})).then((function(e){return e}))}}]),e}());var F=Object(u.h)((function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(!1),r=Object(l.a)(i,2),c=r[0],p=r[1],b=Object(a.useState)(!1),O=Object(l.a)(b,2),f=O[0],g=O[1],N=Object(a.useState)(!1),S=Object(l.a)(N,2),w=S[0],E=S[1],T=Object(a.useState)(null),F=Object(l.a)(T,2),R=F[0],I=F[1],D=Object(a.useState)([]),q=Object(l.a)(D,2),B=q[0],J=q[1],G=Object(a.useState)([]),H=Object(l.a)(G,2),V=H[0],M=H[1],Y=Object(a.useState)(!1),K=Object(l.a)(Y,2),Q=K[0];function W(){s(!1),p(!1),g(!1),E(!1),I(null)}function X(e){(e.target.classList.contains("popup_open")||e.target.classList.contains("popup__close-btn"))&&W()}return K[1],Object(a.useEffect)((function(){x.renderUserInfo().then((function(e){M(e)}))}),[]),Object(a.useEffect)((function(){x.renderCards().then((function(e){J(e)}))}),[]),document.addEventListener("keyup",(function(e){"Escape"===e.key&&W()})),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(j.Provider,{value:V,children:Object(d.jsxs)("div",{className:"body",children:[Object(d.jsx)(h,{loggedIn:Q}),Object(d.jsxs)("div",{className:"homepage",children:[Object(d.jsxs)(u.d,{children:[Object(d.jsx)(z,{path:"/home",cards:B,onCardDelete:function(e){x.deleteCard(e._id).then((function(){var t=B.filter((function(t){return t._id!==e._id}));J(t)}))},onCardLike:function(e){(!1===e.likes.some((function(e){return e._id===V._id}))?x.addLike(e._id):x.removeLike(e._id)).then((function(t){var n=B.map((function(n){return n._id===e._id?t:n}));J(n)}))},onCardClick:function(e){I(e),E(!0)},onEditProfileClick:function(){s(!0)},onEditAvatarClick:function(){p(!0)},onAddPlaceClick:function(){g(!0)},component:m,loggedIn:Q}),Object(d.jsx)(u.b,{path:"/register",children:Object(d.jsx)(U,{onRegisterUser:function(e){var t=this,n=e.email,a=e.password;A.registerUser({email:n,password:a}).then((function(e){e?t.history.push("/login"):console.log("something went wrong")}))}})}),Object(d.jsx)(u.b,{path:"/login",children:Object(d.jsx)(P,{})}),Object(d.jsx)(u.b,{exact:!0,path:"/",children:Q?Object(d.jsx)(u.a,{to:"/home"}):Object(d.jsx)(u.a,{to:"/login"})})]}),Q?Object(d.jsx)(_,{}):"",Object(d.jsx)(v,{isOpen:n,onClose:X,onUpdateUser:function(e){var t=e.name,n=e.about;x.setUserInfo({name:t,about:n}).then((function(e){M(e),W()}))}}),Object(d.jsx)(k,{isOpen:c,onClose:X,onUpdateAvatar:function(e){x.setUserAvatar(e).then((function(e){M(e),W()}))}}),Object(d.jsx)(C,{isOpen:f,onClose:X,onAddCard:function(e){var t=e.name,n=e.link;x.addCard({name:t,link:n}).then((function(e){J([e].concat(Object(o.a)(B))),W()}))}}),Object(d.jsx)(y,{card:R,isOpen:w,onClose:X}),Object(d.jsx)("div",{className:"hide",children:Object(d.jsx)(L,{})})]})]})})})})),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(c.a,{basename:"/",children:Object(d.jsx)(F,{})})}),document.getElementById("root")),R()}},[[37,1,2]]]);
//# sourceMappingURL=main.c84d8f7f.chunk.js.map